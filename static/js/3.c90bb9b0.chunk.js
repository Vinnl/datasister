(window.webpackJsonp=window.webpackJsonp||[]).push([[3,6],{1246:function(e,t,a){"use strict";a.r(t);var n=a(42),c=a(6),r=a.n(c),l=a(17),o=a.n(l),i=a(295),s=a(294),m=a(161),u=function(e){return c.createElement(c.Fragment,null,c.createElement("h2",{className:"title"},"Applications"),c.createElement("p",{className:"content"},"Manage which applications can access data on your Pod."),c.createElement("p",{className:"content"},"Note: applications will never have more access than you have."),c.createElement("table",{className:"table is-fullwidth is-bordered is-striped"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Application URL"),c.createElement("th",null,"Access level"),c.createElement("th",null))),c.createElement("tbody",null,e.apps.map(function(t){return c.createElement(p,{key:t.origin,app:t,onSave:e.onSaveApp,onDelete:e.onDeleteApp})}))),c.createElement(d,{onSave:e.onSaveApp}))},p=function(e){var t={Read:-1!==e.app.modes.indexOf("Read"),Append:-1!==e.app.modes.indexOf("Append"),Write:-1!==e.app.modes.indexOf("Write"),Control:-1!==e.app.modes.indexOf("Control")},a=c.useState(t),r=Object(n.a)(a,2),l=r[0],o=r[1],i=function(e){return function(t){return function(e,t){o(Object(m.a)({},l,Object(s.a)({},e,t)))}(e,t.target.checked)}};return c.createElement("tr",null,c.createElement("td",null,c.createElement("p",null,e.app.origin)),c.createElement("td",null,c.createElement("form",{onSubmit:function(t){t.preventDefault();var a=Object.keys(l).filter(function(e){return l[e]});e.onSave(e.app.origin,a)}},c.createElement("div",{className:"field is-grouped"},c.createElement("div",{className:"control"},c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:i("Read"),checked:l.Read,name:"Read",id:"Read"}),"Read")),c.createElement("div",{className:"control"},c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:i("Append"),checked:l.Append,name:"Append",id:"Append"}),"Append")),c.createElement("div",{className:"control"},c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:i("Write"),checked:l.Write,name:"Write",id:"Write"}),"Write")),c.createElement("div",{className:"control"},c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:i("Control"),checked:l.Control,name:"Control",id:"Control"}),"Control"))),c.createElement("div",{className:"field"},c.createElement("div",{className:"control"},c.createElement("button",{type:"submit",className:"button is-small"},"Save"))))),c.createElement("td",{className:"has-text-right is-narrow"},c.createElement("button",{onClick:function(){return e.onDelete(e.app.origin)},className:"button is-danger is-small"},"Delete")))},d=function(e){var t=c.useState(),a=Object(n.a)(t,2),r=a[0],l=a[1],o=c.useState({Read:!1,Append:!1,Write:!1,Control:!1}),i=Object(n.a)(o,2),u=i[0],p=i[1],d=function(e){return function(t){return function(e,t){p(Object(m.a)({},u,Object(s.a)({},e,t)))}(e,t.target.checked)}};return c.createElement("form",{onSubmit:function(t){t.preventDefault();var a=Object.keys(u).filter(function(e){return u[e]});e.onSave(r,a)},className:"footer"},c.createElement("div",{className:"field"},c.createElement("label",{className:"label"},"App URL:"),c.createElement("input",{type:"url",onChange:function(e){return l(e.target.value)},name:"origin",id:"origin",placeholder:"https://example.com",className:"input"})),c.createElement("div",{className:"field"},c.createElement("div",{className:"control"},c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:d("Read"),name:"Read",id:"Read"}),"Read"),c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:d("Append"),name:"Append",id:"Append"}),"Append"),c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:d("Write"),name:"Write",id:"Write"}),"Write"),c.createElement("label",{className:"checkbox"},c.createElement("input",{type:"checkbox",onChange:d("Control"),name:"Control",id:"Control"}),"Control"))),c.createElement("div",{className:"field"},c.createElement("div",{className:"control"},c.createElement("button",{type:"submit",className:"button is-primary"},"Give access"))))};a.d(t,"TrustedApplications",function(){return f});var f=function(e){var t=Object(i.a)(e.store,e.profile),a=r.a.useState(t),c=Object(n.a)(a,2),l=c[0],s=c[1];if(!e.updater.editable(e.profile.doc().uri,e.store))return r.a.createElement("div",null,"Your profile ",e.profile.doc().uri," is not editable, so we cannot do much here.");return r.a.createElement("section",null,r.a.createElement(u,{apps:l,onSaveApp:function(t,a){return new Promise(function(n){var c=Object(i.c)(o.a.sym(t),e.profile,e.store),r=Object(i.b)(o.a.sym(t),Math.random().toString(36).substring(7),a,e.profile);e.store.updater.update(c,r,function(){var c={subject:e.profile.value,origin:t,modes:a};s(function(e,t){var a=t.findIndex(function(t){return t.origin===e.origin});return-1===a?t.concat(e):t.slice(0,a).concat(e).concat(t.slice(a+1))}(c,l)),n()})})},onDeleteApp:function(t){return new Promise(function(a){var n=Object(i.c)(o.a.sym(t),e.profile,e.store);e.store.updater.update(n,[],function(){s(function(e,t){var a=t.findIndex(function(t){return t.origin===e});return-1===a?t:t.slice(0,a).concat(t.slice(a+1))}(t,l)),a()})})}}))}},1249:function(e,t,a){"use strict";a.r(t);var n=a(42),c=a(6),r=a.n(c),l=a(45),o=a(23),i=function(e){var t=e.profileStatements.reduce(function(e,t){return t.predicate.value===o.b.foaf("name").value?e.name=t.object.value:t.predicate.value===o.b.vcard("hasPhoto").value?e.photo=t.object.value:t.predicate.value===o.b.vcard("organization-name").value?e.organization=t.object.value:t.predicate.value===o.b.vcard("role").value&&(e.role=t.object.value),e},{}),a=t.photo?r.a.createElement("img",{src:t.photo,className:"image is-128x128",alt:t.name||""}):null;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"section"},r.a.createElement("h2",{className:"title"},t.name||"Anonymous"),r.a.createElement("p",{className:"content"},a),r.a.createElement("p",{className:"content"},t.role," ",t.role&&t.organization?" at ":null," ",t.organization)))};var s=a(1246),m=function(e){var t=Object(l.useWebId)();return t&&t===e.profile.value?r.a.createElement("section",{className:"section"},r.a.createElement(s.TrustedApplications,{store:e.store,updater:e.updater,profile:e.profile})):r.a.createElement("p",null,"You can only set your own preferences.")};a.d(t,"Container",function(){return u});var u=function(e){var t=r.a.useState("view"),a=Object(n.a)(t,2),c=a[0],o=a[1];function i(e){return function(t){t.preventDefault(),o(e)}}return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("section",{className:"section"},r.a.createElement(p,Object.assign({},e,{view:c})))),r.a.createElement(l.LoggedIn,null,r.a.createElement("aside",{className:"column is-one-quarter"},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"menu"},r.a.createElement("ul",{className:"menu-list"},r.a.createElement("li",null,r.a.createElement("a",{href:"#profile",onClick:i("view")},"Profile")),r.a.createElement("li",null,r.a.createElement("a",{href:"#trustedApps",onClick:i("preferences")},"Applications"))))))))},p=function(e){if("preferences"===e.view)return r.a.createElement(m,{store:e.store,updater:e.updater,profile:e.resource});var t=e.store.statementsMatching(e.resource,null,null,e.resource.doc());return r.a.createElement(i,{profileStatements:t})}}}]);
//# sourceMappingURL=3.c90bb9b0.chunk.js.map