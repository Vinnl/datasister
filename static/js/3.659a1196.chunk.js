(window.webpackJsonp=window.webpackJsonp||[]).push([[3,6],{1244:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n(6),c=n.n(r),l=n(25),o=n.n(l);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=n(38);function u(e,t,n){return n.statementsMatching(null,s.b.acl("origin"),e,null).reduce(function(e,a){return e.concat(n.statementsMatching(t,s.b.acl("trustedApp"),a.subject,null,!1)).concat(n.statementsMatching(a.subject,null,null,null,!1))},[])}function m(e,t){return e.each(t,s.b.acl("trustedApp"),void 0,void 0).flatMap(function(n){return e.each(n,s.b.acl("origin"),void 0,void 0).map(function(a){var r=e.each(n,s.b.acl("mode"),void 0,void 0);return{origin:a.value,subject:t.value,modes:r.map(function(e){return e.value.replace(s.b.acl("Read").value,"Read").replace(s.b.acl("Append").value,"Append").replace(s.b.acl("Write").value,"Write").replace(s.b.acl("Control").value,"Control")})}})}).sort(function(e,t){return e.origin>t.origin?1:-1})}var p=n(294),d=n(161),f=function(e){return r.createElement(r.Fragment,null,r.createElement("h2",{className:"title"},"Applications"),r.createElement("p",{className:"content"},"Manage which applications can access data on your Pod."),r.createElement("p",{className:"content"},"Note: applications will never have more access than you have."),r.createElement("table",{className:"table is-fullwidth is-bordered is-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Application URL"),r.createElement("th",null,"Access level"),r.createElement("th",null))),r.createElement("tbody",null,e.apps.map(function(t){return r.createElement(v,{key:t.origin,app:t,onSave:e.onSaveApp,onDelete:e.onDeleteApp})}))),r.createElement(b,{onSave:e.onSaveApp}))},v=function(e){var t={Read:-1!==e.app.modes.indexOf("Read"),Append:-1!==e.app.modes.indexOf("Append"),Write:-1!==e.app.modes.indexOf("Write"),Control:-1!==e.app.modes.indexOf("Control")},n=r.useState(t),c=Object(a.a)(n,2),l=c[0],o=c[1],i=function(e){return function(t){return function(e,t){o(Object(d.a)({},l,Object(p.a)({},e,t)))}(e,t.target.checked)}};return r.createElement("tr",null,r.createElement("td",null,r.createElement("p",null,e.app.origin)),r.createElement("td",null,r.createElement("form",{onSubmit:function(t){t.preventDefault();var n=Object.keys(l).filter(function(e){return l[e]});e.onSave(e.app.origin,n)}},r.createElement("div",{className:"field is-grouped"},r.createElement("div",{className:"control"},r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:i("Read"),checked:l.Read,name:"Read",id:"Read"}),"Read")),r.createElement("div",{className:"control"},r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:i("Append"),checked:l.Append,name:"Append",id:"Append"}),"Append")),r.createElement("div",{className:"control"},r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:i("Write"),checked:l.Write,name:"Write",id:"Write"}),"Write")),r.createElement("div",{className:"control"},r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:i("Control"),checked:l.Control,name:"Control",id:"Control"}),"Control"))),r.createElement("div",{className:"field"},r.createElement("div",{className:"control"},r.createElement("button",{type:"submit",className:"button is-small"},"Save"))))),r.createElement("td",{className:"has-text-right is-narrow"},r.createElement("button",{onClick:function(){return e.onDelete(e.app.origin)},className:"button is-danger is-small"},"Delete")))},b=function(e){var t=r.useState(),n=Object(a.a)(t,2),c=n[0],l=n[1],o=r.useState({Read:!1,Append:!1,Write:!1,Control:!1}),i=Object(a.a)(o,2),s=i[0],u=i[1],m=function(e){return function(t){return function(e,t){u(Object(d.a)({},s,Object(p.a)({},e,t)))}(e,t.target.checked)}};return r.createElement("form",{onSubmit:function(t){t.preventDefault();var n=Object.keys(s).filter(function(e){return s[e]});e.onSave(c,n)},className:"footer"},r.createElement("div",{className:"field"},r.createElement("label",{className:"label"},"App URL:"),r.createElement("input",{type:"url",onChange:function(e){return l(e.target.value)},name:"origin",id:"origin",placeholder:"https://example.com",className:"input"})),r.createElement("div",{className:"field"},r.createElement("div",{className:"control"},r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:m("Read"),name:"Read",id:"Read"}),"Read"),r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:m("Append"),name:"Append",id:"Append"}),"Append"),r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:m("Write"),name:"Write",id:"Write"}),"Write"),r.createElement("label",{className:"checkbox"},r.createElement("input",{type:"checkbox",onChange:m("Control"),name:"Control",id:"Control"}),"Control"))),r.createElement("div",{className:"field"},r.createElement("div",{className:"control"},r.createElement("button",{type:"submit",className:"button is-primary"},"Give access"))))};n.d(t,"TrustedApplications",function(){return E});var E=function(e){var t=m(e.store,e.profile),n=c.a.useState(t),r=Object(a.a)(n,2),l=r[0],p=r[1];if(!e.updater.editable(e.profile.doc().uri,e.store))return c.a.createElement("div",null,"Your profile ",e.profile.doc().uri," is not editable, so we cannot do much here.");return c.a.createElement("section",null,c.a.createElement(f,{apps:l,onSaveApp:function(t,n){return new Promise(function(a){var r=u(o.a.sym(t),e.profile,e.store),c=function(e,t,n,a){var r=new o.a.BlankNode("bn_".concat(t));return[o.a.st(a,s.b.acl("trustedApp"),r,a.doc()),o.a.st(r,s.b.acl("origin"),e,a.doc())].concat(i(n.map(function(e){return s.b.acl(e)}).map(function(e){return o.a.st(r,s.b.acl("mode"),e,a.doc())})))}(o.a.sym(t),Math.random().toString(36).substring(7),n,e.profile);e.store.updater.update(r,c,function(){var r={subject:e.profile.value,origin:t,modes:n};p(function(e,t){var n=t.findIndex(function(t){return t.origin===e.origin});return-1===n?t.concat(e):t.slice(0,n).concat(e).concat(t.slice(n+1))}(r,l)),a()})})},onDeleteApp:function(t){return new Promise(function(n){var a=u(o.a.sym(t),e.profile,e.store);e.store.updater.update(a,[],function(){p(function(e,t){var n=t.findIndex(function(t){return t.origin===e});return-1===n?t:t.slice(0,n).concat(t.slice(n+1))}(t,l)),n()})})}}))}},1247:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n(6),c=n.n(r),l=n(52),o=n(38),i=function(e){var t=e.profileStatements.reduce(function(e,t){return t.predicate.value===o.b.foaf("name").value?e.name=t.object.value:t.predicate.value===o.b.vcard("hasPhoto").value?e.photo=t.object.value:t.predicate.value===o.b.vcard("organization-name").value?e.organization=t.object.value:t.predicate.value===o.b.vcard("role").value&&(e.role=t.object.value),e},{}),n=t.photo?c.a.createElement("img",{src:t.photo,className:"image is-128x128",alt:t.name||""}):null;return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"section"},c.a.createElement("h2",{className:"title"},t.name||"Anonymous"),c.a.createElement("p",{className:"content"},n),c.a.createElement("p",{className:"content"},t.role," ",t.role&&t.organization?" at ":null," ",t.organization)))};var s=n(1244),u=function(e){var t=Object(l.useWebId)();return t&&t===e.profile.value?c.a.createElement("section",{className:"section"},c.a.createElement(s.TrustedApplications,{store:e.store,updater:e.updater,profile:e.profile})):c.a.createElement("p",null,"You can only set your own preferences.")};n.d(t,"Container",function(){return m});var m=function(e){var t=c.a.useState("view"),n=Object(a.a)(t,2),r=n[0],o=n[1];function i(e){return function(t){t.preventDefault(),o(e)}}return c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement("section",{className:"section"},c.a.createElement(p,Object.assign({},e,{view:r})))),c.a.createElement(l.LoggedIn,null,c.a.createElement("aside",{className:"column is-one-quarter"},c.a.createElement("div",{className:"section"},c.a.createElement("div",{className:"menu"},c.a.createElement("ul",{className:"menu-list"},c.a.createElement("li",null,c.a.createElement("a",{href:"#profile",onClick:i("view")},"Profile")),c.a.createElement("li",null,c.a.createElement("a",{href:"#trustedApps",onClick:i("preferences")},"Applications"))))))))},p=function(e){if("preferences"===e.view)return c.a.createElement(u,{store:e.store,updater:e.updater,profile:e.resource});var t=e.store.statementsMatching(e.resource,null,null,e.resource.doc());return c.a.createElement(i,{profileStatements:t})}}}]);
//# sourceMappingURL=3.659a1196.chunk.js.map